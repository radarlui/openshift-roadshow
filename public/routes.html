<div class="sect1">
<h2 id="_lab_creating_routes_by_exposing_services">Lab: Creating Routes by Exposing Services</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_application_description">Application description</h3>
<div class="paragraph">
<p>In this lab, we&#8217;re going to make our application visible to the end users, so they can access it.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="/api/workshops/roadshow/content/assets/images/roadshow-app-architecture-parksmap-2.png" alt="Application architecture" width="800">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_background_routes">Background: Routes</h3>
<div class="paragraph">
<p>While <strong>Services</strong> provide internal abstraction and load balancing within an
OpenShift environment, sometimes clients (users, systems, devices, etc.)
<strong>outside</strong> of OpenShift need to access an application. The way that external
clients are able to access applications running in OpenShift is through the
OpenShift routing layer. And the data object behind that is a <strong>Route</strong>.</p>
</div>
<div class="paragraph">
<p>The default OpenShift router (HAProxy) uses the HTTP header of the incoming
request to determine where to proxy the connection. You can optionally define
security, such as TLS, for the <strong>Route</strong>. If you want your <strong>Services</strong>, and, by
extension, your <strong>Pods</strong>,  to be accessible to the outside world, you need to
create a <strong>Route</strong>.</p>
</div>
<div class="sect3">
<h4 id="_exercise_creating_a_route">Exercise: Creating a Route</h4>
<div class="paragraph">
<p>Fortunately, creating a <strong>Route</strong> is a pretty straight-forward process.  You simply click the "Create Route" button associated with the service or the "Create Route" link in the upper right corner of the pod overview page.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/api/workshops/roadshow/content/assets/images/createroute.png" alt="Route">
</div>
</div>
<div class="paragraph">
<p>You can specify the <strong>Hostname</strong> you have or let OpenShift generate the <strong>Hostname</strong> base on the wildcard dns specified during installation.  For this lab, just keep it empty and let OpenShift generate the url for you.  Click the <strong>Create</strong> button to proceed the create of route.</p>
</div>
<!--div class="listingblock">
<div class="paragraph">
<p>First we want to verify that we don&#8217;t already have any existing routes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ oc get routes
No resources found.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we need to get the <strong>Service</strong> name to expose:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ oc get services

NAME       CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE
parksmap   172.30.169.213   &lt;none&gt;        8080/TCP   5h</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once we know the <strong>Service</strong> name, creating a <strong>Route</strong> is a simple one-command task:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ oc expose service parksmap
route "parksmap" exposed</code></pre>
</div>
</div>
<div class="paragraph">
<p>Verify the <strong>Route</strong> was created with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ oc get route
NAME       HOST/PORT                                              PATH      SERVICES   PORT       TERMINATION
parksmap   parksmap-explore-XX.apps.10.2.2.2.xip.io             parksmap   8080-tcp</code></pre>
</div>
</div-->
<div class="paragraph">
<p>You can also verify the <strong>Route</strong> by looking at the project in the OpenShift web console:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/api/workshops/roadshow/content/assets/images/parksmap-route.png" alt="Route">
</div>
</div>
<div class="paragraph">
<p>Pretty nifty, huh?  This application is now available at the URL shown in the
web console. Click the link and you will see:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/api/workshops/roadshow/content/assets/images/parksmap-empty.png" alt="Route">
</div>
</div>
</div>
</div>
</div>
</div>
